"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[67939,36865],{38703:function(n,e,r){r.d(e,{U:function(){return p}});var t=r(7297),o=r(85893),s=r(54336),i=r.n(s),a=r(25675),u=r.n(a);function c(){var n=(0,t.Z)(["\n  width: 100%;\n  max-width: 420px;\n  height: 50px;\n  color: #1e1d20;\n  text-align: center;\n  font-weight: 500;\n  font-size: 16px;\n  display: flex;\n  align-content: stretch;\n  justify-content: center;\n  align-items: center;\n  border: 1px solid #d9dce1;\n  border-radius: 6px;\n  margin: 0 auto;\n  display: flex;\n  gap: 15px;\n  align-items: center;\n"]);return c=function(){return n},n}var l=r(16829).Z.button(c()),d=function(n){var e=n.onClick;return(0,o.jsxs)(l,{onClick:e,children:[(0,o.jsx)(u(),{src:"/icons/common/facebook.svg",height:26,width:26}),"Continue with Facebook"]})},p=function(n){var e=n.onSubmit;return(0,o.jsx)(i(),{isMobile:!1,disableRedirect:!0,appId:"1448335595645943",callback:e,component:d})}},59504:function(n,e,r){r.d(e,{O:function(){return m}});var t=r(7297),o=r(85893),s=r(25675),i=r.n(s),a=r(16829),u=r(36865),c=r(86426);function l(){var n=(0,t.Z)(["\n  width: 100%;\n  max-width: 420px;\n  height: 50px;\n  color: #1e1d20;\n  text-align: center;\n  font-weight: 500;\n  font-size: 16px;\n  display: flex;\n  align-content: stretch;\n  justify-content: center;\n  align-items: center;\n  border: 1px solid #d9dce1;\n  border-radius: 6px;\n  margin: 0 auto;\n  display: flex;\n  align-items: center;\n  gap: 15px;\n"]);return l=function(){return n},n}function d(){var n=(0,t.Z)(["\n  min-width: 187px;\n"]);return d=function(){return n},n}var p=a.Z.button(l()),h=a.Z.span(d()),f=function(n){var e=n.onSubmit,r=(0,c.Nq)({onSuccess:function(n){e(null===n||void 0===n?void 0:n.access_token)},onError:function(n){return console.log("Login Failed",n)}});return(0,o.jsxs)(p,{onClick:function(){return r()},children:[(0,o.jsx)(i(),{src:"/icons/common/google.svg",height:26,width:26}),(0,o.jsx)(h,{children:(0,o.jsx)(u.Z,{phrase:"qr.sign.up.google",fallback:"Continue with Google"})})]})},m=function(n){var e=n.onSubmit;return(0,o.jsx)(c.rg,{clientId:"50870278876-vr3m9m3unfm2pfna591mc58niabmdo6r.apps.googleusercontent.com",children:(0,o.jsx)(f,{onSubmit:e})})}},73228:function(n,e,r){var t=r(40872),o=r(26042),s=r(69396),i=r(85893),a=r(67294),u=r(9041),c=r(21837),l=r(56555),d=function(n){var e=(0,t.Z)({},n),r=(0,a.useState)(!1),d=r[0],p=r[1],h=(0,a.useCallback)((function(){return p(!d)}),[d]);return(0,i.jsx)(l.Z,(0,s.Z)((0,o.Z)({},e),{type:d?"text":"password",autoComplete:"off",InputProps:{endAdornment:(0,i.jsx)(u.Z,{style:{width:24,marginRight:15},position:"start",children:(0,i.jsx)("div",{style:{width:24,height:24,padding:0,cursor:"pointer"},onClick:h,"aria-hidden":"true",children:d?(0,i.jsx)(c.EE,{}):(0,i.jsx)(c.uC,{})})})}}))};e.Z=(0,a.memo)(d)},36865:function(n,e,r){var t=r(26042),o=r(69396),s=r(85893),i=r(67294),a=r(26793),u=r(34231),c=function(n){var e=n.phrase,r=n.fallback,c=void 0===r?"":r,l=n.options,d=n.attributes,p=(0,a.$)().t,h=(0,u.uY)().getDataAttributes,f=(0,i.useMemo)((function(){return e&&c&&l?p(e,c,l):e&&c?p(e,c):e&&l?p(e,l):p(e)}),[e,c,l,p]);return(0,s.jsx)("span",(0,o.Z)((0,t.Z)({},d||{},h(e)),{children:f}))};e.Z=(0,i.memo)(c)},67939:function(n,e,r){r.d(e,{Z:function(){return en}});var t=r(47568),o=r(70655),s=r(85893),i=r(67294),a=r(25617),u=r(27733),c=r(94187),l=r(46648),d=r(56871),p=r(4671),h=r(26042),f=r(99534),m=r(26793),g=r(34231),v=r(98465),x=r(76894),b=r(69396),w=r(72198),Z=r(73228),k=r(10278),C=r(89027),j=r(78470),S=r(26183),y=r(55206),E=r(59504),_=r(42958),A=r(7297),P=r(16829),q=r(45357);function I(){var n=(0,A.Z)(["\n  display: flex;\n  justify-content: flex-end;\n\n  font-weight: 500;\n  font-size: 16px;\n  line-height: 130%;\n  margin-bottom: 24px;\n"]);return I=function(){return n},n}function R(){var n=(0,A.Z)([""]);return R=function(){return n},n}function L(){var n=(0,A.Z)(["\n  text-align: center;\n  display: flex;\n  width: 100%;\n  align-items: center;\n  justify-content: space-around;\n  flex-wrap: nowrap;\n  line-height: 1;\n  margin: 20px 0;\n  "," {\n    margin: 10px 0;\n  }\n"]);return L=function(){return n},n}function T(){var n=(0,A.Z)(["\n  display: flex;\n  gap: 12px;\n  justify-content: center;\n  flex-direction: column;\n  margin: 0 auto;\n"]);return T=function(){return n},n}var D=P.Z.div(I()),U=(P.Z.div(R()),P.Z.span(L(),(0,q.w4)(q.AV.mobileL))),N=P.Z.div(T()),B=r(38703),M=function(n){var e=n.onSubmit,r=n.onSocialSubmit,t=n.onForgotPassword,o=(0,m.$)().t,a=(0,g.uY)(),u=a.getDataAttributes,c=a.refresh,l=(0,j.Z)(),d=l.isEmailError,p=l.handleFocus,f=l.handleBlur,v=(0,i.useState)(!1),x=v[0],A=v[1],P=(0,w.TA)({initialValues:{email:"",password:""},validationSchema:y.Al,onSubmit:e}),q=(0,C.Z)(P);return(0,S.LI)((function(){A(!0)}),[]),(0,i.useEffect)((function(){c()}),[P.errors,P.touched,c]),(0,s.jsxs)(_.Yb,{children:[(0,s.jsxs)(_.l0,{onSubmit:P.handleSubmit,children:[(0,s.jsx)(k.Z,{id:"email",name:"email",autoComplete:"username",disabled:!x,label:o("qr.auth.email.label","Email"),placeholder:o("qr.auth.email.placeholder","Please input email"),value:P.values.email,onChange:q,onFocus:p,onBlur:f,error:d&&P.touched.email&&Boolean(P.errors.email),helperText:d&&P.touched.email&&P.errors.email&&(0,s.jsx)("span",(0,b.Z)((0,h.Z)({},u(P.errors.email)),{children:o(P.errors.email)})),inputProps:u("qr.auth.email.placeholder","placeholder")}),(0,s.jsx)(Z.Z,{id:"password",name:"password",autoComplete:"off",disabled:!x,label:o("qr.auth.password.label","Password"),placeholder:o("qr.auth.password.placeholder","Please enter your password"),value:P.values.password,onChange:q,error:P.touched.password&&Boolean(P.errors.password),helperText:P.touched.password&&P.errors.password&&(0,s.jsx)("span",(0,b.Z)((0,h.Z)({},u(P.errors.password)),{children:o(P.errors.password)})),inputProps:u("qr.auth.password.placeholder","placeholder")}),(0,s.jsx)(D,{children:(0,s.jsx)(_.rU,(0,b.Z)((0,h.Z)({onClick:t},u("qr.auth.forgot.password")),{children:o("qr.auth.forgot.password","Forgot password")}))}),(0,s.jsx)(_.zx,(0,b.Z)((0,h.Z)({type:"submit"},u("qr.auth.login")),{children:o("qr.auth.login","Login")}))]}),(0,s.jsx)(U,{children:" or "}),(0,s.jsxs)(N,{children:[(0,s.jsx)(E.O,{onSubmit:function(n){n&&r(n,"google")}}),(0,s.jsx)(B.U,{onSubmit:function(n){var e=n.accessToken;e&&r(e,"facebook")}})]})]})},O=(0,i.memo)(M),F=function(n){var e=n.open,r=n.onClose,t=(0,f.Z)(n,["open","onClose"]),o=(0,m.$)().t,i=(0,g.uY)().getDataAttributes;return(0,s.jsx)("div",{onClick:function(n){n.stopPropagation()},role:"presentation",children:(0,s.jsxs)(x.Z,{withScroll:!0,open:e,onClose:r,children:[(0,s.jsx)(v.Z,(0,h.Z)({text:o("qr.auth.login","Login")},i("qr.auth.login"))),(0,s.jsx)(O,(0,h.Z)({},t))]})})},W=(0,i.memo)(F),Y=r(6779),z=r(60235),G=function(){var n=(0,a.I0)();return(0,i.useCallback)((0,t.Z)((function(){return(0,o.__generator)(this,(function(e){return n((0,z.tg)(void 0)),n((0,z.T6)(void 0)),[2]}))})),[n])},Q=r(83403),V=r(39358),$=r(67598),J=r(51197),K=r(11163),H=r(11557),X=r(89321),nn=function(n){var e=n.isOpen,r=void 0===e||e,h=n.onClose,f=(0,a.I0)(),m=(0,a.v9)(c.Nv),g=(0,K.useRouter)(),v=G(),x=(0,Y.W)({onError:(0,i.useCallback)((function(n){(0,d.c)(n,"error")}),[])}),b=(0,i.useCallback)((function(){h?h():g.push(l.BA.ROOT,void 0,{shallow:!1})}),[g,h]),w=(0,i.useCallback)(function(){var n=(0,t.Z)((function(n){var e,r,t;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return J.D.setScansLimitAlert(!1),f((0,u.d0)(n)),f((0,u.av)(n.user)),(0,H.MY)(n.accessToken),n.user.role===X.t.USER&&J.D.removeLokaliseEditor(),J.D.setUser(n.user),e={},J.D.setJWTokens((e.refreshToken=n.refreshToken,e.accessToken=n.accessToken,e)),m?(J.D.setScansLimitAlert(!1),r={},n.user.status!==Q.bv.FREEMIUM_NEW&&n.user.status!==Q.bv.FREEMIUM_OLD&&n.user.status!==Q.bv.PREMIUM_CANCELLED||g.push(l.BA.SUBSCRIPTION_PRICING,void 0,(r.shallow=!0,r)),[4,x()]):[3,2];case 1:o.sent(),v(),o.label=2;case 2:return t={},g.push((t.pathname=l.BA.CABINET_QR_CODES,t.query=g.query,t)),n.user.status===Q.bv.FREEMIUM_OLD&&J.D.setScansLimitAlert(!0),[2]}}))}));return function(e){return n.apply(this,arguments)}}(),[m,g,f,x,v]),Z=function(){var n=(0,t.Z)((function(n,e){var r,t,s;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:if(!n)return[2];o.label=1;case 1:return o.trys.push([1,6,,7]),"google"!==e?[3,3]:[4,V.i.googleLogin(n)];case 2:return r=o.sent().data,w(r),[3,5];case 3:return"facebook"!==e?[3,5]:[4,V.i.facebookLogin(n)];case 4:t=o.sent().data,w(t),o.label=5;case 5:return[3,7];case 6:return s=o.sent(),console.error(s),(0,d.c)((0,$.uk)(s),"error"),[3,7];case 7:return[2]}}))}));return function(e,r){return n.apply(this,arguments)}}(),k=(0,i.useCallback)(function(){var n=(0,t.Z)((function(n){var e,r,t;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),e=g.query.userId,[4,(e?V.i.becameUser:V.i.login)(n,"string"===typeof e?e:"")];case 1:return r=o.sent().data,w(r),[3,3];case 2:return t=o.sent(),console.error(t),(0,d.c)((0,$.uk)(t),"error"),[2,t];case 3:return[2]}}))}));return function(e){return n.apply(this,arguments)}}(),[g.query,w]),C=(0,i.useCallback)((function(){g.push(l.BA.RECOVER_PASSWORD,void 0,{shallow:!0})}),[g]),j=(0,i.useCallback)((function(){g.push(l.BA.SIGN_UP,void 0,{shallow:!0})}),[g]);return(0,s.jsx)(p.Z,{open:r,onClick:b,children:(0,s.jsx)(W,{open:r,onClose:b,onSubmit:k,onForgotPassword:C,onSignUp:j,onSocialSubmit:Z})})},en=(0,i.memo)(nn)},6779:function(n,e,r){r.d(e,{W:function(){return p}});var t=r(47568),o=r(70655),s=r(67294),i=r(25617),a=r(40769),u=r(17219),c=r(94187),l=r(67598),d=r(60235),p=function(n){var e=n.preload,r=n.onError,p=n.postLoad,h=(0,i.v9)(c.Nv),f=(0,i.v9)(c.o5),m=(0,i.I0)();return(0,s.useCallback)((0,t.Z)((function(){var n,t;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,6,7,8]),h?(e&&e(),f?[4,a.P.update(f.id,h)]:[3,2]):(console.error("Qr code is empty"),[2]);case 1:return o.sent(),m((0,d.tg)(void 0)),m((0,d.T6)(void 0)),[3,5];case 2:return n=(0,u.Kt)(h),[4,a.P.updateAsGuest(n.id,n)];case 3:return o.sent(),[4,a.P.publish(n.id)];case 4:o.sent(),m((0,d.tg)(void 0)),o.label=5;case 5:return[3,8];case 6:return t=o.sent(),console.error(t),r&&r((0,l.uk)(t)),[3,8];case 7:return p&&p(),[7];case 8:return[2]}}))})),[h,e,f,m,r,p])}},94187:function(n,e,r){r.d(e,{Nv:function(){return s},o5:function(){return i}});var t=r(68697),o=function(n){return n.builder},s=(0,t.P1)([o],(function(n){return n.unsavedQRCode})),i=(0,t.P1)([o],(function(n){return n.unsavedQRCodeUpdateTarget}))}}]);